<!-- templates/asset_form.html - Updated with new fields -->
{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h2>{% if asset %}Edit Asset{% else %}Add New Asset{% endif %}</h2>
    </div>
</div>

<div class="row">
    <div class="col-md-10">
        <div class="card">
            <div class="card-body">
                <form method="POST">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="serial_number" class="form-label">Serial Number *</label>
                                <input type="text" class="form-control" name="serial_number" 
                                       value="{{ asset.serial_number if asset }}" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="asset_type" class="form-label">Asset Type *</label>
                                <select class="form-select" name="asset_type" required>
                                    <option value="">Select Type</option>
                                    {% for asset_type_option in ASSET_TYPE_OPTIONS %}
                                    <option value="{{ asset_type_option }}" 
                                        {% if asset and asset.asset_type == asset_type_option %}selected{% endif %}>
                                        {{ asset_type_option }}
                                    </option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="model" class="form-label">Model</label>
                                <input type="text" class="form-control" name="model" 
                                       value="{{ asset.model if asset }}">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="status" class="form-label">Status *</label>
                                <select class="form-select" name="status" required>
                                    {% for status_option in STATUS_OPTIONS %}
                                    <option value="{{ status_option }}" 
                                        {% if asset and asset.status == status_option %}selected{% endif %}>
                                        {{ status_option }}
                                    </option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <div class="mb-3">
                                <label for="location" class="form-label">Location</label>
                                <input type="text" class="form-control" name="location" 
                                       value="{{ asset.location if asset }}" 
                                       placeholder="Customer address or warehouse location">
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="received_date" class="form-label">Received Date</label>
                                <input type="date" class="form-control" name="received_date" 
                                       value="{{ asset.received_date.strftime('%Y-%m-%d') if asset and asset.received_date }}">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="dispatched_to_fsp_date" class="form-label">Dispatched to FSP Date</label>
                                <input type="date" class="form-control" name="dispatched_to_fsp_date" 
                                       value="{{ asset.dispatched_to_fsp_date.strftime('%Y-%m-%d') if asset and asset.dispatched_to_fsp_date }}">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="dispatched_to_panasonic_date" class="form-label">Dispatched to Panasonic Date</label>
                                <input type="date" class="form-control" name="dispatched_to_panasonic_date" 
                                       value="{{ asset.dispatched_to_panasonic_date.strftime('%Y-%m-%d') if asset and asset.dispatched_to_panasonic_date }}">
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="sc_number" class="form-label">SC Number <small class="text-muted">(optional)</small></label>
                                <input type="text" class="form-control" name="sc_number" 
                                       value="{{ asset.sc_number if asset }}" 
                                       placeholder="SC-xx-xxxxxx">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="job_number" class="form-label">Job Number <small class="text-muted">(optional)</small></label>
                                <input type="text" class="form-control" name="job_number" 
                                       value="{{ asset.job_number if asset }}" 
                                       placeholder="L000">
                            </div>
                        </div>
                    </div>

                    <div class="d-flex gap-2 mt-4">
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-save"></i> 
                            {% if asset %}Update Asset{% else %}Create Asset{% endif %}
                        </button>
                        <a href="{{ url_for('assets') }}" class="btn btn-secondary">
                            <i class="fas fa-times"></i> Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
